<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Scenario Builder</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; max-width: 800px; margin: auto; }
    label { display: block; margin-top: 10px; font-weight: bold; }
    input, textarea, select, button { width: 100%; padding: 8px; margin-top: 5px; }
    .inline { display: flex; gap: 10px; }
    .inline input, .inline select { flex: 1; }
    hr { margin: 30px 0; }
  </style>
</head>
<body>

  <h1>üõ†Ô∏è EMS Scenario Builder</h1>

  <!-- Scenario Type -->
  <label for="type">Scenario Type:</label>
  <select id="type">
    <option value="medical">Medical</option>
    <option value="trauma">Trauma</option>
  </select>

  <!-- Dispatch Info -->
  <label for="dispatch">Dispatch Info:</label>
  <textarea id="dispatch" rows="3" placeholder="Type or generate dispatch info..."></textarea>
  <button onclick="autoGenerateDispatch()">Auto Generate Dispatch</button>

  <hr>

  <!-- Vitals -->
  <h2>Vitals</h2>
  <div class="inline">
    <input id="bp" placeholder="Blood Pressure (e.g. 120/80)" />
    <input id="pulse" placeholder="Pulse (bpm)" />
  </div>
  <div class="inline">
    <input id="rr" placeholder="Respirations (per min)" />
    <input id="spo2" placeholder="SpO2 (%)" />
  </div>
  <div class="inline">
    <input id="pupils" placeholder="Pupils" />
    <input id="skin" placeholder="Skin Condition" />
  </div>
  <button onclick="autoGenerateVitals()">Auto Generate Vitals</button>

  <hr>

  <!-- History, Meds, Allergies -->
  <label for="history">Patient History:</label>
  <textarea id="history" rows="2"></textarea>
  <button onclick="autoGenerateHistory()">Auto Generate History</button>

  <label for="meds">Medications:</label>
  <input id="meds" />
  <button onclick="autoGenerateMeds()">Auto Generate Meds</button>

  <label for="allergies">Allergies:</label>
  <input id="allergies" />
  <button onclick="autoGenerateAllergies()">Auto Generate Allergies</button>

  <hr>

  <!-- Media Upload -->
  <h2>Media Upload</h2>
  <label>Upload Media File:</label>
  <input type="file" id="mediaFile" />
  <label for="trigger">Trigger (e.g. 'on patient contact'):</label>
  <input id="trigger" placeholder="When should this media display?" />

  <hr>
  <button onclick="saveScenario()">üíæ Save Scenario JSON</button>

  <pre id="output" style="background:#f4f4f4; padding:10px; margin-top:20px;"></pre>

  <script>
    function autoGenerateDispatch() {
      document.getElementById("dispatch").value = "Dispatched to a 58-year-old male with chest pain at home. Patient is alert and diaphoretic.";
    }

    function autoGenerateVitals() {
      document.getElementById("bp").value = "146/88";
      document.getElementById("pulse").value = "104";
      document.getElementById("rr").value = "20";
      document.getElementById("spo2").value = "95";
      document.getElementById("pupils").value = "Equal, reactive";
      document.getElementById("skin").value = "Cool, pale, diaphoretic";
    }

    function autoGenerateHistory() {
      document.getElementById("history").value = "Hypertension, high cholesterol, MI in 2019.";
    }

    function autoGenerateMeds() {
      document.getElementById("meds").value = "Aspirin, Metoprolol";
    }

    function autoGenerateAllergies() {
      document.getElementById("allergies").value = "Penicillin";
    }

    function saveScenario() {
      const scenario = {
        type: document.getElementById("type").value,
        dispatch: document.getElementById("dispatch").value,
        vitals: {
          bloodPressure: document.getElementById("bp").value,
          pulse: document.getElementById("pulse").value,
          respirations: document.getElementById("rr").value,
          spo2: document.getElementById("spo2").value,
          pupils: document.getElementById("pupils").value,
          skin: document.getElementById("skin").value
        },
        history: {
          pastMedicalHistory: document.getElementById("history").value,
          medications: document.getElementById("meds").value,
          allergies: document.getElementById("allergies").value
        },
        media: {
          filename: document.getElementById("mediaFile").files[0]?.name || "",
          trigger: document.getElementById("trigger").value
        }
      };

      document.getElementById("output").textContent = JSON.stringify(scenario, null, 2);
    }
  </script>
</body>
</html>
